<footer class="bg-dark text-white ">
  <div class="container py-4">
    <div class="row py-5">
      <div class="col-md-4 mb-3 mb-md-0">
        <h6 class="text-uppercase mb-3">Customer services</h6>
        <ul class="list-unstyled mb-0 ">
          <li><a class="footer-link" href="#!">Help &amp; Contact Us</a></li>
          <li><a class="footer-link" href="#!">Returns &amp; Refunds</a></li>
          <li><a class="footer-link" href="#!">Online Stores</a></li>
          <li><a class="footer-link" href="#!">Terms &amp; Conditions</a></li>
        </ul>
      </div>
      <div class="col-md-4 mb-3 mb-md-0">
        <h6 class="text-uppercase mb-3">Company</h6>
        <ul class="list-unstyled mb-0">
          <li><a class="footer-link" href="#!">What We Do</a></li>
          <li><a class="footer-link" href="#!">Available Services</a></li>
          <li><a class="footer-link" href="#!">Latest Posts</a></li>
          <li><a class="footer-link" href="#!">FAQs</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h6 class="text-uppercase mb-3">Social media</h6>
        <ul class="list-unstyled mb-0">
          <li><a class="footer-link" href="#!">Twitter</a></li>
          <li><a class="footer-link" href="#!">Instagram</a></li>
          <li><a class="footer-link" href="#!">Tumblr</a></li>
          <li><a class="footer-link" href="#!">Pinterest</a></li>
        </ul>
      </div>
    </div>
    <div class="border-top pt-4" style="border-color: #1d1d1d !important">
      <div class="row">
        <div class="col-md-6 text-center text-md-start">
          <p class="small text-muted mb-0">&copy; 2023 All rights reserved.</p>
        </div>
        <!-- <div class="col-md-6 text-center text-md-end"> -->
        <!-- <p class="small text-muted mb-0">Template designed by <a class="text-white reset-anchor" href="https://bootstrapious.com/p/boutique-bootstrap-e-commerce-template">Bootstrapious</a></p> -->
        <!-- If you want to remove the backlink, please purchase the Attribution-Free License. See details in readme.txt or license.txt. Thanks!-->
        <!-- </div> -->
      </div>
    </div>
  </div>
</footer>
<script>
  function getModal(id) {
    $.ajax({
      type: "POST",
      url: "/getModal",
      data: { id },
      dataType: "json",
      encode: true,
    }).done(function (data) {
      console.log(data);
      $('#prodImg').attr('src', '/productimages/' + data.image[0])
      $('#name').html(data.name)
      $('#price').html(data.price)
      $('#description').html(data.description)
      $('#addtocart2').attr('onclick', 'addtocart("' + data._id + '") ')
    });
  }
</script>
<script>
  function addtocart(id) {
    $.ajax({
      type: "POST",
      url: "/addtocart",
      data: { id },
      dataType: "json",
      encode: true,
    }).done(function (data) {

      // total += data.price
      // console.log(total+"TOTAL")
      if (data == "LOGIN FIRST") {
        console.log("SWEET");
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'Login first!',
          footer: '<a href="/login">Go to login</a>'
        })
      }
      else if (data == "alreadyexit") {
        Swal.fire({
          icon: 'warning',
          title: 'Already added',
          footer: '<a href="/cart">Check cart</a>'
        })
      }
      else if (data.key == "added") {
        Swal.fire({
          icon: 'success',
          title: 'Successfully added',
          text: 'Good job!',
          timer: 2000,
          footer: '<a href="/cart">GO TO CART</a>'
        })

      }
    });
  }
</script>
<script>
  function deletecart(id) {

    Swal.fire({
      title: 'Are you sure?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
      if (result.isConfirmed) {
        let price = Number($('#' + id + 'Price').html())
        let Qnty = Number($('#' + id + 'Qnty').val())
        let currentTotal = Number($('#cartSubTotal').html())
        $('#cartSubTotal').html(currentTotal - (price * Qnty))
        $.ajax({
          type: "POST",
          url: "/deletecart",
          data: { id },
          dataType: "json",
          encode: true,
        }).done(function (data) {
          Swal.fire(
            'removed!',
            'This product has been removed.',
            'success'
          )
          $('#' + id + 'item').remove()
        });
      }
    })
  }
</script>

<script>
  // subTotal=currentTotal;
  function quantity(id) {
    let Qnty = Number($('#' + id + 'Qnty').val())

    if (Number($('#' + id + 'Qnty').attr('max')) > Qnty) {

      $.ajax({
        type: "POST",
        url: "/quantity",
        data: { id },
        dataType: "json",
        encode: true,
      }).done(function (data) {
        let price = Number($('#' + id + 'Price').html())
        let Qnty = Number($('#' + id + 'Qnty').val())
        let currentTotal = Number($('#cartSubTotal').html())
        $('#' + id + 'Qnty').val(Qnty + 1)
        $('#' + id + 'TotalPrice').html(price * (Qnty + 1))
        $('#cartSubTotal').html(currentTotal + price)
        $('#Total').html(currentTotal + price)
        console.log('TOTAL: ' + currentTotal);
        console.log('pricetot: ' + price * Qnty);
        console.log('price: ' + price);
        console.log('quty: ' + Qnty);
        // console.log(data+"datd");
        // console.log(Qnty+"quantity");
        // console.log(price+"price");
        // if(data.key=="over"){
        //   $('#'+id+'Qnty').attr('max',data.price) 
        //   Swal.fire('Any fool can use a computer')
        // }
      });
    } else {
      Swal.fire({ text: 'Sorry! Limited stock' })
    }
  }
</script>
<script>
  // subTotal=currentTotal
  function quantitydec(id) {
    $.ajax({
      type: "POST",
      url: "/quantitydec",
      data: { id },
      dataType: "json",
      encode: true,
    }).done(function (data) {
      let price = Number($('#' + id + 'Price').html())
      let Qnty = Number($('#' + id + 'Qnty').val())
      $('#' + id + 'TotalPrice').html(price * Qnty)
      let currentTotal = Number($('#cartSubTotal').html())
      $('#cartSubTotal').html(currentTotal - price)
      $('#Total').html(currentTotal - price)


      if (data == "deleted") {
        Swal.fire(
          'removed!',
          'Your product has been removed.',
          'success'
        )
        $('#' + id + 'item').remove()
      }
    });
  }
</script>
<script>
  function wishlist(id) {
    $.ajax({
      type: "POST",
      url: "/addwishlist",
      data: { id },
      dataType: "json",
      encode: true,
    }).done(function (data) {

      // total += data.price
      // console.log(total+"TOTAL")
      if (data == "LOGIN FIRST") {
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'Login first!',
          footer: '<a href="/login">Go to login</a>'
        })
      }
      else if (data == "alreadyexit") {
        Swal.fire({
          icon: 'warning',
          title: 'Already added',
          footer: '<a href="/cart">Check cart</a>'
        })
      }
      else if (data.key == "added") {
        // $('#subtotal').html(total) 
        Swal.fire({
          icon: 'success',
          title: 'Successfully added',
          text: 'Good job!',
          footer: '<a href="/wishlist">GO TO Wishlist</a>'
        })

      }
    });
  }
</script>

</section>
<!-- JavaScript files-->
<script src="/public/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/vendor/glightbox/js/glightbox.min.js"></script>
<script src="/vendor/nouislider/nouislider.min.js"></script>
<script src="/vendor/swiper/swiper-bundle.min.js"></script>
<script src="/vendor/choices.js/public/assets/scripts/choices.min.js"></script>
<script src="/js/front.js"></script>
<script>
  // ------------------------------------------------------- //
  //   Inject SVG Sprite - 
  //   see more here 
  //   https://css-tricks.com/ajaxing-svg-sprite/
  // ------------------------------------------------------ //
  function injectSvgSprite(path) {

    var ajax = new XMLHttpRequest();
    ajax.open("GET", path, true);
    ajax.send();
    ajax.onload = function (e) {
      var div = document.createElement("div");
      div.className = 'd-none';
      div.innerHTML = ajax.responseText;
      document.body.insertBefore(div, document.body.childNodes[0]);
    }
  }
  // this is set to BootstrapTemple website as you cannot 
  // inject local SVG sprite (using only 'icons/orion-svg-sprite.svg' path)
  // while using file:// protocol
  // pls don't forget to change to your domain :)
  injectSvgSprite('https://bootstraptemple.com/files/icons/orion-svg-sprite.svg');

</script>
<!-- FontAwesome CSS - loading as last, so it doesn't block rendering-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
  integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

</body>
</html>